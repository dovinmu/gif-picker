# Replace with your domain (or use :80 for HTTP-only testing)
honeycomb.example.com {
    # Serve static frontend
    root * /var/www/honeycomb
    file_server

    # SPA fallback - serve index.html for client-side routing
    try_files {path} /index.html

    # Proxy API requests to Antfly
    handle /api/* {
        reverse_proxy localhost:8080
    }

    # Proxy termite requests (strip /termite prefix)
    handle /termite/* {
        uri strip_prefix /termite
        reverse_proxy localhost:11434
    }

    # Compression
    encode gzip

    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        Referrer-Policy strict-origin-when-cross-origin
    }
}
